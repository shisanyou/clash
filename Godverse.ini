;=========================================================
;             🌌 Custom OpenClash Rules 模板
;---------------------------------------------------------
;  🌟 全分组防 DNS 泄漏订阅转换模板
;  原作者: https://github.com/Aethersailor
;  优化者: Godverse
;---------------------------------------------------------
;  📜 说明:
;    此模板如光影流转，将世界节点一一纳入掌心；
;    直连、代理、自动选择，皆为灵活之舞；
;    海外社交、视频、AI 服务，尽在规则中无声流转；
;    漏网之鱼亦能安然回归，DNS 泄漏无所遁形。
;---------------------------------------------------------
;  🌍 节点分组:
;    - 🇭🇰 香港、🇯🇵 日本、🇼🇸 台湾、🇸🇬 新加坡、🇺🇸 美国
;    - 🇲🇾 马来西亚、🇪🇺 欧洲
;---------------------------------------------------------
;  功能说明:
;    1️⃣ 分流规则覆盖全球主流服务: YouTube、Netflix、TikTok、GitHub、ChatGPT、AI 服务等
;    2️⃣ 支持自动选择、手动选择、全球直连、漏网之鱼逻辑
;    3️⃣ 内置国内直连、BT Tracker、Steam CDN 等优化规则
;    4️⃣ 遵循规则优先级，从上至下匹配，保证高效分流
;---------------------------------------------------------
;  🙏 感谢原作者提供模板，优化后更适合多地区节点选择与高阶分流策略
;=========================================================

[custom]

;==================== 规则设置 ====================
; 📌 规则自上而下匹配，优先命中上位规则
; 🔹 本地地址直连
ruleset = 🎯 全球直连, []GEOSITE, private
ruleset = 🎯 全球直连, []GEOIP, private, no-resolve

; 🔹 本项目直连规则
ruleset = 🎯 全球直连, clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Direct_Classical.yaml, 28800

; 🔹 本项目代理规则
ruleset = 🚀 手动选择, clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Proxy_Classical.yaml, 28800

; 🔹 国内直连优化
ruleset = 🎯 全球直连, []GEOSITE, google-cn
ruleset = 🎯 全球直连, []GEOSITE, category-games@cn
ruleset = 🎯 全球直连, clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Steam_CDN_Classical.yaml, 28800
ruleset = 🎯 全球直连, []GEOSITE, category-game-platforms-download
ruleset = 🎯 全球直连, []GEOSITE, category-public-tracker

; 🔹 海外服务
ruleset = 💬 即时通讯, []GEOSITE, category-communication
ruleset = 🌐 社交媒体, []GEOSITE, category-social-media-!cn
ruleset = 🤖 ChatGPT, []GEOSITE, openai
ruleset = 🤖 Copilot, []GEOSITE, bing
ruleset = 🤖 AI服务, []GEOSITE, category-ai-!cn
ruleset = 🚀 GitHub, []GEOSITE, github
ruleset = 🚀 测速工具, []GEOSITE, category-speedtest
ruleset = 🎮 Steam, []GEOSITE, steam
ruleset = 📹 YouTube, []GEOSITE, youtube
ruleset = 🎥 AppleTV+, []GEOSITE, apple-tvplus
ruleset = 🍎 苹果服务, []GEOSITE, apple
ruleset = Ⓜ️ 微软服务, []GEOSITE, microsoft
ruleset = 📢 谷歌FCM, []GEOSITE, googlefcm
ruleset = 🇬 谷歌服务, []GEOSITE, google
ruleset = 🎶 TikTok, []GEOSITE, tiktok
ruleset = 🎥 Netflix, []GEOSITE, netflix
ruleset = 🎥 DisneyPlus, []GEOSITE, disney
ruleset = 🎥 HBO, []GEOSITE, hbo
ruleset = 🎥 PrimeVideo, []GEOSITE, primevideo
ruleset = 🎥 Emby, []GEOSITE, category-emby
ruleset = 🎻 Spotify, []GEOSITE, spotify
ruleset = 📺 Bahamut, []GEOSITE, bahamut
ruleset = 🎮 游戏平台, []GEOSITE, category-games
ruleset = 🌎 国外媒体, []GEOSITE, category-entertainment
ruleset = 🛒 国外电商, []GEOSITE, category-ecommerce

; 🔹 国内兜底
ruleset = 🎯 全球直连, []GEOSITE, cn
ruleset = 🎯 全球直连, []GEOIP, cn, no-resolve

; 🔹 非标端口优化
ruleset = 🔀 非标端口, clash-classic:https://testingcf.jsdelivr.net/gh/Aethersailor/Custom_OpenClash_Rules@main/rule/Custom_Port_Direct.yaml, 28800

; 🔹 漏网之鱼处理
ruleset = 🐟 漏网之鱼, []FINAL

;==================== 节点分组 ====================
custom_proxy_group = 🚀 手动选择 `select` []♻️ 自动选择 []🇭🇰 香港节点 []🇯🇵 日本节点 []🇼🇸 台湾节点 []🇸🇬 新加坡节点 []🇺🇸 美国节点 []🇲🇾 马来西亚节点 []🇪🇺 欧洲节点

custom_proxy_group = ♻️ 自动选择 `url-test` .* `https://www.gstatic.com/generate_204` 300,,50

custom_proxy_group = 💬 即时通讯 `select` []♻️ 自动选择 []🇭🇰 香港节点 []🇯🇵 日本节点 []🇼🇸 台湾节点 []🇸🇬 新加坡节点 []🇺🇸 美国节点 []🇲🇾 马来西亚节点 []🇪🇺 欧洲节点 []🚀 手动选择
custom_proxy_group = 🌐 社交媒体 `select` []🇭🇰 香港节点 []🇯🇵 日本节点 []🇼🇸 台湾节点 []🇸🇬 新加坡节点 []🇺🇸 美国节点 []🇲🇾 马来西亚节点 []🇪🇺 欧洲节点 []🚀 手动选择 []♻️ 自动选择
custom_proxy_group = 🚀 GitHub `select` []🇭🇰 香港节点 []🇯🇵 日本节点 []🇼🇸 台湾节点 []🇸🇬 新加坡节点 []🇺🇸 美国节点 []🇲🇾 马来西亚节点 []🇪🇺 欧洲节点 []🚀 手动选择 []♻️ 自动选择 []🎯 全球直连
custom_proxy_group = 🤖 ChatGPT `select` []🇭🇰 香港节点 []🇯🇵 日本节点 []🇼🇸 台湾节点 []🇸🇬 新加坡节点 []🇺🇸 美国节点 []🇲🇾 马来西亚节点 []🇪🇺 欧洲节点 []🚀 手动选择 []♻️ 自动选择

custom_proxy_group = 🐟 漏网之鱼 `select` []🇭🇰 香港节点 []🇯🇵 日本节点 []🇼🇸 台湾节点 []🇸🇬 新加坡节点 []🇺🇸 美国节点 []🇲🇾 马来西亚节点 []🇪🇺 欧洲节点 []🚀 手动选择 []♻️ 自动选择 []🎯 全球直连
custom_proxy_group = 🔀 非标端口 `select` []🐟 遵循规则 []🎯 全球直连

;==================== 节点测速 URL ====================
custom_proxy_group = 🇭🇰 香港节点 `url-test` (港|HK|hk|Hong Kong|HongKong|hongkong|深港) `https://www.gstatic.com/generate_204` 300,,50
custom_proxy_group = 🇺🇸 美国节点 `url-test` (美|US|United States|UnitedStates|波特兰|洛杉矶|西雅图|芝加哥) `https://www.gstatic.com/generate_204` 300,,50
custom_proxy_group = 🇯🇵 日本节点 `url-test` (日本|JP|Japan|东京|大阪) `https://www.gstatic.com/generate_204` 300,,50
custom_proxy_group = 🇸🇬 新加坡节点 `url-test` (新加坡|SG|Singapore|狮城) `https://www.gstatic.com/generate_204` 300,,50
custom_proxy_group = 🇼🇸 台湾节点 `url-test` (台|TW|Taiwan|新北) `https://www.gstatic.com/generate_204` 300,,50
custom_proxy_group = 🇲🇾 马来西亚节点 `url-test` (马来西亚|Malaysia|吉隆坡) `https://www.gstatic.com/generate_204` 300,,50
custom_proxy_group = 🇪🇺 欧洲节点 `url-test` (欧|Europe|France|Germany|UK|Netherlands|法国|德国|英国|荷兰) `https://www.gstatic.com/generate_204` 300,,50

;==================== 兜底与直连 ====================
custom_proxy_group = 🎯 全球直连 `select` []DIRECT
custom_proxy_group = 🐟 遵循规则 `select` []🐟 漏网之鱼

;==================== 参数 ====================
enable_rule_generator = true
overwrite_original_rules = true